<html>
<head>
  <title>Cloud Flare</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
  <script src="https://fb.me/react-0.14.6.js"></script>
  <script src="https://fb.me/react-dom-0.14.6.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.25/browser.min.js"></script>

</head>

<body>
  <div class="container">
    <div class="row">
      <div class="col-md-6 col-md-offset-3">
        <div id="github-profiles"></div>
      </div>
    </div>
  </div>

  <script type="text/babel">
    var Profile = React.createClass({
      getDefaultProps: function(){
        return {
          clientId: '3f4df2ac58b22554f43a',
          clientSecret: 'd48ad4d7033e841b0c02a69a35393606445648e6',
          urls: {
            user: 'https://api.github.com/users'
          },
          perPage: 5
        }
      },
      getInitialState: function(){
        return {
          username: 'dianpan',
          userData: [],
          repoDate: []
        }
      },
      loadUserData: function() {
        $.ajax({
          url: this.props.urls.user + '/' + this.state.username + '?client_id=' + this.props.client_id + '&client_secret=' + this.props.clientSecret,
          dataType: 'json',
          cache: false,
          success: function(data){
            console.log(data);
            this.setState({userData: data});
          }.bind(this),
          error: function(xhr, status, err){
            this.setState({username: null});
            alert(err);
          }.bind(this)
        });
      },
      loadRepoData: function() {

      },
      componentDidMount: function() {
        //add ajax calls
        this.loadUserData();
        this.loadRepoData();
      },
      render: function(){
        return(
          <div>
            <UserInfo />
            <Repos />
          </div>
          )
      }
    });

    var UserInfo = React.createClass({
      render: function(){
        return(
          <div>
            USERINFO
          </div>
          )
      }
    })

    var Repos = React.createClass({
      render: function(){
        return(
          <div>
            REPOS
          </div>
          )
      }
    })

    ReactDOM.render(
      <Profile />,
      document.getElementById('github-profiles'));
  </script>
</body>
</html>